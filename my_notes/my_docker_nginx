–û—Ç–ª–∏—á–Ω–æ, –¥–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º—Å—è.

## üß± –û–±—â–∞—è —Å—Ö–µ–º–∞: NGINX + Uvicorn

–î–ª—è Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å `ASGI`-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º (–∞ –Ω–µ `WSGI`), —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```
–ö–ª–∏–µ–Ω—Ç  <--->  NGINX  <--->  Uvicorn  <--->  Django (ASGI)
                             |
                             +--> PostgreSQL (—á–µ—Ä–µ–∑ Django ORM)
```

---

## üî• –ß—Ç–æ —Ç–∞–∫–æ–µ NGINX –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω

**NGINX** ‚Äî —ç—Ç–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ –æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

* –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTTPS (TLS/SSL),
* –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏,
* –æ—Ç–¥–∞—á–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (CSS, JS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è),
* –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ backend (Uvicorn),
* –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤.

üìå *NGINX –Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç Python-–∫–æ–¥.* –û–Ω –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ –¥—Ä—É–≥–æ–º—É —Å–µ—Ä–≤–µ—Ä—É, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å Python (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ ‚Äî Uvicorn).

---

## üêé –ß—Ç–æ —Ç–∞–∫–æ–µ Uvicorn

**Uvicorn** ‚Äî —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π ASGI-—Å–µ—Ä–≤–µ—Ä –¥–ª—è Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (FastAPI, Django 3.0+ —Å ASGI). –û–Ω:

* –ø—Ä–∏–Ω–∏–º–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –æ—Ç NGINX,
* –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –≤ —Ä–∞–º–∫–∞—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (ASGI),
* –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ.

–ï—Å–ª–∏ –±—ã —É —Ç–µ–±—è –±—ã–ª `WSGI` (—Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±), —Ç—ã –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª **Gunicorn** –∏–ª–∏ **uWSGI**.

---

## ‚ùì –ü–æ—á–µ–º—É –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ Uvicorn?

Uvicorn –º–æ–∂–µ—Ç —Å–∞–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å HTTP-–∑–∞–ø—Ä–æ—Å—ã, –Ω–æ:

* –æ–Ω –ø–ª–æ—Ö–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –±–æ–ª—å—à–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏,
* –Ω–µ —É–º–µ–µ—Ç —Ö–æ—Ä–æ—à–æ —É–ø—Ä–∞–≤–ª—è—Ç—å SSL/HTTPS,
* –Ω–µ —É–º–µ–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å —Å—Ç–∞—Ç–∏–∫—É (–∏ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç—è–∂–µ–ª–µ–µ).

üìå –ü–æ—ç—Ç–æ–º—É Uvicorn –ø—Ä—è—á—É—Ç –∑–∞ NGINX, –∏ –∫–∞–∂–¥—ã–π –¥–µ–ª–∞–µ—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É.

---

## üìò –ü—Ä–∏–º–µ—Ä Docker-—Å—Ü–µ–Ω–∞—Ä–∏—è (–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ)

```dockerfile
# –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ —Å Python
FROM python:3.11-slim

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–∏—Å—Ç–µ–º—ã
RUN apt-get update && apt-get install -y \
    build-essential \
    libpq-dev \
    && rm -rf /var/lib/apt/lists/*

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
WORKDIR /app

# –ö–æ–ø–∏—Ä—É–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY requirements.txt .

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä—É–µ–º –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
COPY . .

# –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ uvicorn)
EXPOSE 8000

# –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ (–±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è docker-compose)
CMD ["uvicorn", "kino_project.asgi:application", "--host", "0.0.0.0", "--port", "8000"]
```

### –ü–æ—è—Å–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫

* `FROM python:3.11-slim`: –±–µ—Ä–µ–º –ª—ë–≥–∫–∏–π –æ–±—Ä–∞–∑ Python.
* `apt-get update && install`: —Å—Ç–∞–≤–∏–º –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã –∏ libpq –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL.
* `rm -rf /var/lib/apt/lists/*`: –æ—á–∏—â–∞–µ–º –∫—ç—à apt (—É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞).
* `WORKDIR /app`: –≤—Å—è —Ä–∞–±–æ—Ç–∞ –±—É–¥–µ—Ç –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ `/app`.
* `COPY requirements.txt .` + `RUN pip install`: —Å–Ω–∞—á–∞–ª–∞ —Å—Ç–∞–≤–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
* `COPY . .`: –ø–æ—Ç–æ–º –∫–æ–ø–∏—Ä—É–µ–º –≤–µ—Å—å –∫–æ–¥.
* `EXPOSE 8000`: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞—Ä—É–∂—É.
* `CMD [...]`: –∑–∞–ø—É—Å–∫–∞–µ–º Uvicorn —Å Django ASGI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

---

## ‚ú® –î–∞–ª–µ–µ

–¢—ã –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **docker-compose** –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

* NGINX
* PostgreSQL
* Django —Å Uvicorn

–•–æ—á–µ—à—å ‚Äî —è —Å–æ–±–µ—Ä—É —Ç–µ–±–µ `docker-compose.yml` –∏ `nginx.conf` –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ.
